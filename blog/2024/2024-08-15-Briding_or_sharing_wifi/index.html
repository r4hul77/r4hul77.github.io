<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> <html><body> <p>As an engineer working with embedded devices, I’ve often encountered situations where I needed to update Docker images on devices like the Jetson Xavier, which lacked a WiFi card due to size constraints in our DAQ kit. After hours of searching for a solution, I’ve compiled this guide to help others facing similar challenges. There are two main methods to share your laptop’s internet connection with an embedded device connected via Ethernet:</p> <ol> <li>Bridging: This method places the embedded device on the same local subnet as your laptop.</li> <li>NAT (Network Address Translation): Your laptop acts as a router, forwarding traffic between networks.</li> </ol> <h3 id="bridging">Bridging</h3> <p>On your laptop, run the following commands:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brctl addbr mybridge
brctl addif mybridge eth0
brctl addif mybridge wlan0
</code></pre></div></div> <p><strong>Note:</strong> This method may not work with all WiFi cards. If you encounter issues, delete the bridge using <code class="language-plaintext highlighter-rouge">brctl del mybridge</code> and proceed to the NAT method.</p> <h3 id="nat">NAT</h3> <h4 id="1-enable-ip-forwarding-on-your-laptop">1. Enable IP forwarding on your laptop:</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo </span>1 <span class="o">&gt;</span> /proc/sys/net/ipv4/ip_forward
</code></pre></div></div> <p>For IPv6, replace ipv4 with ipv6 in the command.</p> <h4 id="2-set-up-iptables-rules">2. Set up iptables rules:</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iptables <span class="nt">-t</span> nat <span class="nt">-A</span> POSTROUTING <span class="nt">-o</span> wlan0 <span class="nt">-j</span> MASQUERADE
iptables <span class="nt">-A</span> FORWARD <span class="nt">-i</span> wlan0 <span class="nt">-o</span> eth0 <span class="nt">-m</span> state <span class="nt">--state</span> RELATED,ESTABLISHED <span class="nt">-j</span> ACCEPT
iptables <span class="nt">-A</span> FORWARD <span class="nt">-i</span> eth0 <span class="nt">-o</span> wlan0 <span class="nt">-j</span> ACCEPT
</code></pre></div></div> <h4 id="3-configure-the-gateway-on-your-embedded-device-xavier-or-raspberry-pi">3. Configure the gateway on your embedded device (Xavier or Raspberry Pi):</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> route add default gw 192.168.1.254 eth0
</code></pre></div></div> <h4 id="4-test-it-by-quickly-pining-an-external-ip-address">4. Test it by quickly pining an external ip address</h4> <p>With these steps, you should be able to run <code class="language-plaintext highlighter-rouge">sudo apt update</code> and resolve any issues without reinstalling the WiFi card on your embedded device. This guide provides a quick and efficient solution for sharing internet connections with embedded devices, saving time and effort in development and testing scenarios.</p> </body></html>