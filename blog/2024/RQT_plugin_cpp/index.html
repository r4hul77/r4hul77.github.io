<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="google-site-verification" content="wMMWCQ9RsFrDvzjAYMzJdV4x6UBmBkYjvrb29HLbTew"> <meta http-equiv="Permissions-Policy" content="interest-cohort=()"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Let's build an RQT plugin in ROS2 | Rahul Harsha Cheppally </title> <meta name="author" content="Rahul Harsha Cheppally"> <meta name="description" content="Learn to build a RQT Plugin in C++"> <meta name="keywords" content="portfolio-website, Rahul, Harsha, Cheppally, Robotics, AI"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://r4hul77.github.io/blog/2024/RQT_plugin_cpp/"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?0afe9f0ae161375728f7bcc5eb5b4ab4"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Rahul Harsha</span> Cheppally </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">My Repos </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Let's build an RQT plugin in ROS2</h1> <p class="post-meta"> March 11, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/ros2"> <i class="fa-solid fa-hashtag fa-sm"></i> ROS2</a>   <a href="/blog/tag/robotics"> <i class="fa-solid fa-hashtag fa-sm"></i> Robotics</a>   <a href="/blog/tag/c"> <i class="fa-solid fa-hashtag fa-sm"></i> C++</a>     ·   <a href="/blog/category/ros2"> <i class="fa-solid fa-tag fa-sm"></i> ROS2</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="1-introduction-to-ros2-and-rqt">1. Introduction to ROS2 and RQT</h2> <p>Since you’ve landed on this page, it’s safe to assume you have a grasp of what ROS2 (Robot Operating System 2) is. For the uninitiated, ROS2 is the next generation of ROS, providing a framework for writing software for robots that includes a collection of tools, libraries, and conventions aimed at simplifying the task of creating complex and robust robot behavior across a wide variety of robotic platforms. Now, let’s shift our focus to a particularly interesting and integral part of the ROS2 ecosystem - RQT.</p> <h3 id="what-is-rqt-and-its-importance-in-ros2">What is RQT and Its Importance in ROS2</h3> <p>Imagine if you could give your robots a brain transplant with just a few clicks. That’s RQT for you, a Qt-based plugin development in ROS that let’s you whip up a reuseable and scalable GUI application in a few minutes.</p> <h4 id="why-is-rqt-so-important-in-ros2"><strong>Why is RQT so important in ROS2?</strong></h4> <ol> <li> <p><strong>Versatility and Flexibility:</strong> Thanks to RQT’s plugin-based architecture, crafting new plugins is so easy that you might find yourself making one just for fun. And when you realize you’ve just saved yourself hours of head-scratching over terminal commands, you’ll want to bake a cake for RQT.</p> </li> <li> <p><strong>Improved User Experience:</strong> RQT is like the friendly robot in those sci-fi movies that translates alien tech into good ol’ human. Its graphical interface means you don’t need to decipher cryptic terminal texts anymore. It’s making robotics accessible to everyone, from the curious newbie to the seasoned engineer who’s seen one too many terminal screens.</p> </li> </ol> <h2 id="2-setting-the-stage-prerequisites-and-environment-setup">2. Setting the Stage: Prerequisites and Environment Setup</h2> <p>Alright, let’s roll up our sleeves and get down to business. First order of the day: make sure your Linux machine is all fired up and ready to go. And if you’re reading this from the cozy confines of Microsoft, no worries! The Windows Subsystem for Linux (WSL) has kinda got your back—just. I’m going to take a wild guess that you’ve got a handle on the basics of ROS2, including the sacred ritual of sourcing your environment. So, let’s skip the formalities and dive into the toolbox you’ll need to make some magic happen.T### The Journey Begins: Installing Qt</p> <p>First things first, grab the Qt installer from the official <a href="https://www.qt.io/download" rel="external nofollow noopener" target="_blank">Qt download page</a>. Once you’ve got that, it’s time to set things up:</p> <ol> <li>Open a terminal and navigate to the directory where you’ve downloaded the Qt installer.</li> <li> <p>Update the file permissions to make it executable with the following command:</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> <span class="nb">chmod</span> +x qt-unified-linux-x64-4.7.0-online.run
 ./qt-unified-linux-x64-4.7.0-online.run
</code></pre></div> </div> </li> <li> <p>Install the necessary Qt packages for your development environment:</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> <span class="nb">sudo </span>apt <span class="nb">install </span>qtbase5-dev qtchooser qt5-qmake qtbase5-dev-tools
</code></pre></div> </div> </li> </ol> <h3 id="setting-up-qt-creator-for-rqt-plugin-development">Setting Up Qt Creator for RQT Plugin Development</h3> <p>Now that Qt is installed, it’s time to fire up Qt Creator and start a new project:</p> <ol> <li>Open <strong>Qt Creator</strong> and select <strong>Create New Project</strong>.</li> <li>Navigate through the setup steps until you reach the <strong>Kit Selection</strong> tab. It’s here you’ll want to make a crucial choice: select <strong>Widget</strong> instead of <strong>QWindow</strong> for your project type, ensuring you’re on the right track for RQT plugin development.</li> </ol> <h4 id="navigating-the-qt-creator-setup">Navigating the Qt Creator Setup</h4> <p>Here’s a visual guide to help you through the setup process in Qt Creator:</p> <ul> <li>First, you’ll select the Widget option for your project, setting the stage for your plugin development.</li> <li>In the Kit Selection step, make sure your development kit is correctly configured. This might involve selecting a specific compiler or Qt version, depending on your system and ROS2 setup.</li> <li>Finally, you might need to manage your kits more directly, especially if you’re working in a specialized development environment. This could involve adding a new kit and configuring it to match your ROS2 development needs.</li> </ul> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/rqt_cpp/widgets-480.webp 480w,/assets/img/posts/rqt_cpp/widgets-800.webp 800w,/assets/img/posts/rqt_cpp/widgets-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/rqt_cpp/widgets.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/rqt_cpp/kits-480.webp 480w,/assets/img/posts/rqt_cpp/kits-800.webp 800w,/assets/img/posts/rqt_cpp/kits-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/rqt_cpp/kits.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/rqt_cpp/kits_final-480.webp 480w,/assets/img/posts/rqt_cpp/kits_final-800.webp 800w,/assets/img/posts/rqt_cpp/kits_final-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/rqt_cpp/kits_final.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <h2 id="3-rqt-plugin-basics">3. RQT Plugin Basics</h2> <p>Welcome to the dojo of RQT plugins, where we mold the raw, chaotic energy of code into disciplined, user-friendly GUI applications. If RQT plugins were a martial art, consider this your white belt initiation.</p> <h3 id="understanding-rqt-plugin-architecture">Understanding RQT Plugin Architecture</h3> <p>Imagine RQT plugin architecture as a grand, bustling city. At its heart lies the main application (let’s call it the Mayor), which manages all the little plugin citizens. Each plugin is like a specialized shop in this city, offering unique services (widgets) that can be used independently or combined to create something greater, much like a thriving marketplace.</p> <p>This city is built on the solid ground of Qt, with roads paved by ROS2, ensuring all plugins can communicate seamlessly, sharing topics and services like gossip across backyard fences. The architecture is designed to be modular; you can add or remove plugins without disrupting the city’s harmony. It’s urban planning at its finest, but for robots.</p> <h4 id="the-plugin-manifesto-a-declaration-of-independence">The Plugin Manifesto: A Declaration of Independence</h4> <p>Every plugin comes with a manifesto (the plugin.xml file), declaring its intentions, capabilities, and how it wishes to be recognized by the Mayor (the main application). This document ensures that every plugin plays nice and can be easily found and integrated into the bustling city life.</p> <h3 id="core-components-of-an-rqt-plugin">Core Components of an RQT Plugin</h3> <p>Breaking down an RQT plugin, we find it’s not just a single entity but a team of components working in harmony:</p> <ol> <li> <p><strong>The GUI (Graphical User Interface):</strong> This is the face of your plugin, the part users will interact with. It’s like the shopfront, inviting and easy to navigate.</p> </li> <li> <p><strong>Backend Logic:</strong> The brain behind the operation, handling the heavy lifting, computations, and ROS communications. It’s the shopkeeper, managing transactions and making sure the customer (user) leaves happy.</p> </li> <li> <p><strong>Plugin.xml Manifest:</strong> As mentioned, this is your plugin’s ID, business license, and billboard all rolled into one, ensuring it gets the recognition it deserves.</p> </li> <li> <p><strong>Initialization Script:</strong> This is the ribbon-cutting ceremony for your plugin. It tells RQT how to start your plugin and integrate it into the grand scheme of things.</p> </li> </ol> <p>Think of crafting an RQT plugin as opening a shop in the city of ROS2. Your goal is to provide a service, attract customers (users), and contribute to the city’s (ROS community’s) growth. With the right combination of GUI charm and backend brains, your plugin could become the next big thing in the RQT cityscape.</p> <p>So, grab your hard hat and blueprint. It’s time to build some plugins.</p> <h2 id="4-designing-your-rqt-plugin-the-simple-logger">4. Designing Your RQT Plugin: The Simple Logger</h2> <p>Embarking on the creation of a Simple Logger RQT plugin is like setting up a diary for your robot, but instead of secrets, it’s filled with log messages. This section will guide you through planning its functionality, considering the UI design, and leveraging Qt Designer to bring it all to life. Eventhough rqtconsole exists let’s assume that it doesn’t for this tutorial.</p> <h3 id="planning-your-plugins-functionality">Planning Your Plugin’s Functionality</h3> <p>Before we start doodling our UI, let’s establish what our Simple Logger needs to do. At its core, the plugin should:</p> <ul> <li> <strong>Capture and display ROS log messages:</strong> It should listen for log messages from your ROS system and display them in real time.</li> <li> <strong>Offer log message filtering:</strong> Users should be able to filter the displayed messages based on severity levels such as DEBUG, INFO, WARN, ERROR, and FATAL.</li> <li> <strong>Provide user control over the log display:</strong> A pause/resume feature will help users stop the flood of messages when they need to focus on specific information.</li> </ul> <h3 id="ui-design-considerations-for-rqt-plugins">UI Design Considerations for RQT Plugins</h3> <p>When designing the UI for our Simple Logger, keep these principles in mind:</p> <ul> <li> <strong>Simplicity and Clarity:</strong> The main goal is to read log messages easily. A clean and straightforward layout will help users find the information they need without distractions.</li> <li> <strong>Usability:</strong> Features like filtering and pausing the message stream should be intuitive to use. Think about placing these controls within easy reach and making their functions obvious.</li> <li> <strong>Responsiveness:</strong> The UI should handle updates smoothly, without lag or jank, even when bombarded with a high volume of log messages.</li> </ul> <h3 id="leveraging-qt-designer-for-ui-development">Leveraging Qt Designer for UI Development</h3> <p>Qt Designer will be our trusty sidekick in creating the UI for our Simple Logger. Here’s a step-by-step approach to using it effectively:</p> <ol> <li> <strong>Lay Out the Main Components:</strong> -Drag a <code class="language-plaintext highlighter-rouge">Vertical Layout</code> <ul> <li>Drag a <code class="language-plaintext highlighter-rouge">QTextEdit</code> widget into the central area. This will be where the log messages are displayed.</li> <li>Now Drag a <code class="language-plaintext highlighter-rouge">Horizontal Layout</code> and Horizonatal spacer to it.</li> <li>Add a <code class="language-plaintext highlighter-rouge">QComboBox</code> or a panel of <code class="language-plaintext highlighter-rouge">QPushButton</code>s for the log level filters and the pause/resume feature.</li> <li>Your layout should look like the image below.</li> </ul> </li> </ol> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/rqt_cpp/layout_final-480.webp 480w,/assets/img/posts/rqt_cpp/layout_final-800.webp 800w,/assets/img/posts/rqt_cpp/layout_final-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/rqt_cpp/layout_final.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <ol> <li> <strong>Customize the Widgets:</strong> <ul> <li>For the <code class="language-plaintext highlighter-rouge">QTextEdit</code>, enable read-only mode to prevent users from editing the log messages directly.</li> <li>Customize the buttons or toolbar actions to represent different log levels and control features (e.g., icons for pause/resume, dropdown for filter levels).</li> </ul> </li> <li> <strong>Set Object Names:</strong> <ul> <li>Assign meaningful object names to your UI components. This will help you reference them easily in your cpp code when you need to update the UI or handle user actions.</li> </ul> </li> <li> <strong>Preview and Adjust:</strong> <ul> <li>Use the preview feature in Qt Designer to see how your UI looks and behaves. Adjust sizes, layouts, and styles until you’re satisfied with the design.</li> </ul> </li> </ol> <p>Following these steps, you’ll craft a UI that’s not just functional but also a joy to use. With the planning and design phase wrapped up, you’re now ready to breathe life into your Simple Logger, turning lines of code into a valuable tool for ROS enthusiasts.</p> <h2 id="5-next-up-integrating-it-with-ros2-and-all-the-other-nice-stuff">5. Next Up Integrating it with ROS2 and all the other nice stuff.</h2> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/wifi/">Sharing Internet Connection with Embedded Devices</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Rahul Harsha Cheppally. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: September 17, 2024. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?da39b660470d1ba6e6b8bf5f37070b6e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-H84M9MJ3NM"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-H84M9MJ3NM");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>